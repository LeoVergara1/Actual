<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.68.3 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="Brandon Vergara">
<meta name="keywords" content="disqus, elixir, delivery, edeliver, distillery">
<meta name="description" content="How do a connection between cas and phoenix?
This post I want to talk about :ueberauth_cas, since I haven&rsquo;t found a example to be used.
ueberauth_cas
Is a central Authentication for a ticket from any cas authentication View github: https://github.com/marceldegraaf/ueberauth_cas
Install dependencies
You should know, this dependency needs to ueberauth to its functio, than you have a little information about this dependency (ueberauth): https://github.com/ueberauth/ueberauth
First Step
Add dependencies
## Application def application do[mod: {ExampleUeberauthCas.">


<meta property="og:description" content="How do a connection between cas and phoenix?
This post I want to talk about :ueberauth_cas, since I haven&rsquo;t found a example to be used.
ueberauth_cas
Is a central Authentication for a ticket from any cas authentication View github: https://github.com/marceldegraaf/ueberauth_cas
Install dependencies
You should know, this dependency needs to ueberauth to its functio, than you have a little information about this dependency (ueberauth): https://github.com/ueberauth/ueberauth
First Step
Add dependencies
## Application def application do[mod: {ExampleUeberauthCas.">
<meta property="og:type" content="article">
<meta property="og:title" content="Ueberauth_cas with Phoenix (Elixir)">
<meta name="twitter:title" content="Ueberauth_cas with Phoenix (Elixir)">
<meta property="og:url" content="https://leovergara1.github.io/post/ueberauth_cas_with_phoenix/">
<meta property="twitter:url" content="https://leovergara1.github.io/post/ueberauth_cas_with_phoenix/">
<meta property="og:site_name" content="Brandon Vergara">
<meta property="og:description" content="How do a connection between cas and phoenix?
This post I want to talk about :ueberauth_cas, since I haven&rsquo;t found a example to be used.
ueberauth_cas
Is a central Authentication for a ticket from any cas authentication View github: https://github.com/marceldegraaf/ueberauth_cas
Install dependencies
You should know, this dependency needs to ueberauth to its functio, than you have a little information about this dependency (ueberauth): https://github.com/ueberauth/ueberauth
First Step
Add dependencies
## Application def application do[mod: {ExampleUeberauthCas.">
<meta name="twitter:description" content="How do a connection between cas and phoenix?
This post I want to talk about :ueberauth_cas, since I haven&rsquo;t found a example to be used.
ueberauth_cas
Is a central Authentication for a ticket from any cas authentication View github: https://github.com/marceldegraaf/ueberauth_cas
Install dependencies
You should know, this dependency needs to ueberauth to its functio, than you have a little information about this dependency (ueberauth): https://github.com/ueberauth/ueberauth
First Step
Add dependencies
## Application def application do[mod: {ExampleUeberauthCas.">
<meta property="og:locale" content="en">

  
    <meta property="article:published_time" content="2018-07-29T00:00:00">
  
  
    <meta property="article:modified_time" content="2018-07-29T00:00:00">
  
  
  
    
      <meta property="article:section" content="projects">
    
      <meta property="article:section" content="Help">
    
      <meta property="article:section" content="Elixir">
    
      <meta property="article:section" content="Erlang">
    
      <meta property="article:section" content="cas">
    
      <meta property="article:section" content="Ueberauth_cas">
    
  
  
    
      <meta property="article:tag" content="Makingdevs">
    
      <meta property="article:tag" content="Experience">
    
  


<meta name="twitter:card" content="summary">







  <meta property="og:image" content="https://leovergara1.github.io/images/cas/authotification_cover.jpg">
  <meta property="twitter:image" content="https://leovergara1.github.io/images/cas/authotification_cover.jpg">


  <meta property="og:image" content="https://leovergara1.github.io/images/cas/authotification.jpg">
  <meta property="twitter:image" content="https://leovergara1.github.io/images/cas/authotification.jpg">




  <meta property="og:image" content="https://leovergara1.github.io/images/yo.jpg">
  <meta property="twitter:image" content="https://leovergara1.github.io/images/yo.jpg">


    <title>Ueberauth_cas with Phoenix (Elixir)</title>

    <link rel="icon" href="https://leovergara1.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://leovergara1.github.io/post/ueberauth_cas_with_phoenix/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://leovergara1.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-90564886-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://leovergara1.github.io/">Brandon Vergara</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://leovergara1.github.io/#about">
    
    
    
      
        <img class="header-picture" src="https://leovergara1.github.io/images/yo.jpg" alt="" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://leovergara1.github.io/#about">
          <img class="sidebar-profile-picture" src="https://leovergara1.github.io/images/yo.jpg" alt="" />
        </a>
        <h4 class="sidebar-profile-name">Brandon Vergara</h4>
        
          <h5 class="sidebar-profile-bio">Pasión por la programación y el análisis <strong>(<a href="mailto:leovergara.dark@gmail.com">leovergara.dark@gmail.com</a>)</strong></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://leovergara1.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://leovergara1.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://leovergara1.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://leovergara1.github.io/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://leovergara1.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.facebook.com/leo.deuzumaki" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
      
      <span class="sidebar-button-desc">Facebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://es.stackoverflow.com/users/42896/leo-vergara" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/LeoVergara2" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/LeoVergara1" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://leovergara1.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-spotify"></i>
      
      <span class="sidebar-button-desc">Spotify</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-center
              "
       style="background-image:url('/images/cas/authotification.jpg')"
       data-behavior="4">
    
      <div class="post-header main-content-wrap text-center">
  
    <h1 class="post-title" itemprop="headline">
      Ueberauth_cas with Phoenix (Elixir)
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-07-29T00:00:00Z">
        
   29, 2018

      </time>
    
    
  
  
    <span></span>
    
      <a class="category-link" href="https://leovergara1.github.io/categories/projects">projects</a>, 
    
      <a class="category-link" href="https://leovergara1.github.io/categories/help">Help</a>, 
    
      <a class="category-link" href="https://leovergara1.github.io/categories/elixir">Elixir</a>, 
    
      <a class="category-link" href="https://leovergara1.github.io/categories/erlang">Erlang</a>, 
    
      <a class="category-link" href="https://leovergara1.github.io/categories/cas">cas</a>, 
    
      <a class="category-link" href="https://leovergara1.github.io/categories/ueberauth_cas">Ueberauth_cas</a>
    
  

  </div>

</div>
    
  </div>


      <div id="main" data-behavior="4"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p><strong>How do a connection between cas and phoenix?</strong></p>
<p>This post I want to talk about :ueberauth_cas, since I haven&rsquo;t found a example to be used.</p>
<p><strong>ueberauth_cas</strong></p>
<p>Is a central Authentication for a ticket from any cas authentication
View github: <a href="https://github.com/marceldegraaf/ueberauth_cas">https://github.com/marceldegraaf/ueberauth_cas</a></p>
<p><strong>Install dependencies</strong></p>
<p>You should know, this dependency needs to ueberauth to its functio, than you have a little information about this dependency (ueberauth): <a href="https://github.com/ueberauth/ueberauth">https://github.com/ueberauth/ueberauth</a></p>
<p><strong>First Step</strong></p>
<p>Add dependencies</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir"><span style="color:#75715e">## Application</span>

def application do
[
<span style="color:#e6db74">mod</span>: {<span style="color:#a6e22e">ExampleUeberauthCas.Application</span>, []},
<span style="color:#e6db74">extra_applications</span>: [<span style="color:#e6db74">:logger</span>, <span style="color:#e6db74">:runtime_tools</span>, <span style="color:#e6db74">:httpoison</span>, <span style="color:#e6db74">:ueberauth</span>, <span style="color:#e6db74">:ueberauth_cas</span>]
]
end

<span style="color:#75715e">## Your deps</span>
defp deps do
[
{<span style="color:#e6db74">:phoenix</span>, <span style="color:#e6db74">&#34;~&gt; 1.3.2&#34;</span>},
{<span style="color:#e6db74">:phoenix_pubsub</span>, <span style="color:#e6db74">&#34;~&gt; 1.0&#34;</span>},
{<span style="color:#e6db74">:phoenix_ecto</span>, <span style="color:#e6db74">&#34;~&gt; 3.2&#34;</span>},
{<span style="color:#e6db74">:postgrex</span>, <span style="color:#e6db74">&#34;&gt;= 0.0.0&#34;</span>},
{<span style="color:#e6db74">:phoenix_html</span>, <span style="color:#e6db74">&#34;~&gt; 2.10&#34;</span>},
{<span style="color:#e6db74">:phoenix_live_reload</span>, <span style="color:#e6db74">&#34;~&gt; 1.0&#34;</span>, <span style="color:#e6db74">only</span>: <span style="color:#e6db74">:dev</span>},
{<span style="color:#e6db74">:gettext</span>, <span style="color:#e6db74">&#34;~&gt; 0.11&#34;</span>},
{<span style="color:#e6db74">:cowboy</span>, <span style="color:#e6db74">&#34;~&gt; 1.0&#34;</span>},
{<span style="color:#e6db74">:httpoison</span>, <span style="color:#e6db74">&#34;~&gt; 1.2&#34;</span>, <span style="color:#e6db74">override</span>: true},
{<span style="color:#e6db74">:ueberauth</span>, <span style="color:#e6db74">&#34;~&gt; 0.4&#34;</span>},
{<span style="color:#e6db74">:ueberauth_cas</span>, <span style="color:#e6db74">&#34;~&gt; 1.1.0&#34;</span>, <span style="color:#e6db74">override</span>: true}
]
end
</code></pre></div><p>We have to add override in true, because cas dependency needs to httpoison in version 0.3 but in this test was able to check with as correct functionally in its current version.</p>
<p><strong>Second Step</strong></p>
<p>We add the configuration in your config, dev or prod, according to the case</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">config <span style="color:#e6db74">:ueberauth</span>, <span style="color:#a6e22e">Ueberauth</span>,
<span style="color:#e6db74">providers</span>: [
<span style="color:#e6db74">cas</span>: {<span style="color:#a6e22e">Ueberauth.Strategy.CAS</span>, [
<span style="color:#e6db74">base_url</span>: <span style="color:#e6db74">&#34;https://apr-test.ebc.edu.mx/casad&#34;</span>,
<span style="color:#e6db74">callback</span>: <span style="color:#e6db74">&#34;http://localhost:4000/&#34;</span>,
<span style="color:#e6db74">callback_url</span>: <span style="color:#e6db74">&#34;http://localhost:4000/auth/cas/callback&#34;</span>
]}]
</code></pre></div><p><strong>Third Step</strong></p>
<p>We crate a controller like to auth_controller.ex</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">defmodule <span style="color:#a6e22e">ExampleUeberauthCasWeb.AuthController</span> do
<span style="color:#a6e22e">@moduledoc</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">Auth controller responsible for handling Ueberauth responses
</span><span style="color:#e6db74">&#34;&#34;&#34;</span>

use <span style="color:#a6e22e">ExampleUeberauthCasWeb</span>, <span style="color:#e6db74">:controller</span>
plug <span style="color:#a6e22e">Ueberauth</span>

alias <span style="color:#a6e22e">Floki</span>

<span style="color:#a6e22e">Plug.Conn</span>

def login(conn, _params, _current_user, _claims) do
conn
<span style="color:#f92672">|&gt;</span> <span style="color:#a6e22e">Ueberauth.Strategy.CAS</span><span style="color:#f92672">.</span>handle_request!
end

def callback(%{<span style="color:#e6db74">assigns</span>: %{<span style="color:#e6db74">ueberauth_failure</span>: _fails}} <span style="color:#f92672">=</span> conn, _params) do
conn
<span style="color:#f92672">|&gt;</span> put_flash(<span style="color:#e6db74">:error</span>, <span style="color:#e6db74">&#34;Failed to authenticate.&#34;</span>)
<span style="color:#f92672">|&gt;</span> redirect(<span style="color:#e6db74">to</span>: <span style="color:#e6db74">&#34;/&#34;</span>)
end

def callback(%{<span style="color:#e6db74">assigns</span>: %{<span style="color:#e6db74">ueberauth_auth</span>: auth}} <span style="color:#f92672">=</span> conn, _params) do
conn
<span style="color:#f92672">|&gt;</span> put_flash(<span style="color:#e6db74">:info</span>, <span style="color:#e6db74">&#34;Successfully authenticated.&#34;</span>)
<span style="color:#f92672">|&gt;</span> put_session(<span style="color:#e6db74">:current_user</span>, auth)
<span style="color:#f92672">|&gt;</span> redirect(<span style="color:#e6db74">to</span>: <span style="color:#e6db74">&#34;/&#34;</span>)
end

def delete(conn, _params) do
conn
<span style="color:#f92672">|&gt;</span> put_flash(<span style="color:#e6db74">:info</span>, <span style="color:#e6db74">&#34;You have been logged out!&#34;</span>)
<span style="color:#f92672">|&gt;</span> configure_session(<span style="color:#e6db74">drop</span>: true)
<span style="color:#f92672">|&gt;</span> redirect(<span style="color:#e6db74">external</span>: <span style="color:#e6db74">&#34;https://apr-test.ebc.edu.mx/casad/logout&#34;</span>)
end


end
</code></pre></div><p>In my case I needed to add Floki dependency, because in producción, phoenix was not compiling.</p>
<p><strong>Fourth Step</strong></p>
<p>We are near 🙂, so we create our scope in your router.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">scope <span style="color:#e6db74">&#34;/auth&#34;</span>, <span style="color:#a6e22e">ExampleUeberauthCasWeb</span> do
pipe_through [<span style="color:#e6db74">:browser</span>]

get <span style="color:#e6db74">&#34;/:provider&#34;</span>, <span style="color:#a6e22e">AuthController</span>, <span style="color:#e6db74">:request</span>
get <span style="color:#e6db74">&#34;/:provider/callback&#34;</span>, <span style="color:#a6e22e">AuthController</span>, <span style="color:#e6db74">:callback</span>
delete <span style="color:#e6db74">&#34;/:provider/logout&#34;</span>, <span style="color:#a6e22e">AuthController</span>, <span style="color:#e6db74">:delete</span>
get <span style="color:#e6db74">&#34;/:provider/logout&#34;</span>, <span style="color:#a6e22e">AuthController</span>, <span style="color:#e6db74">:delete</span>
end
</code></pre></div><p><strong>Method Request</strong></p>
<p>it Is who goes to make petition to cas authentication</p>
<p><strong>Method callback</strong></p>
<p>It is where returned the information from cas authentication</p>
<p><strong>Method delete</strong></p>
<p>This case we create both methods, delete and get, because in some cases the form in html5 not supported method delete.
is need to realize this, Ueberauth.Strategy.CAS saves in cache the token from cas authentication, so we need to delete session that is saved in phoenix.</p>
<p>This is enough to function, we can see in the url: http://localhost:4000/auth/cas</p>
<p><strong>Plus:</strong></p>
<p>you wan to everyone calls to controllers has to pass for this auth, then you should create a plug like this</p>
<p>In your plug custom</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">defmodule <span style="color:#a6e22e">ExampleUeberauthCasWeb.Plug.Auth</span> do

import <span style="color:#a6e22e">Plug.Conn</span>
import <span style="color:#a6e22e">Phoenix.Controller</span>
require <span style="color:#a6e22e">Logger</span>

def init(_opts) do
end

def call(%{<span style="color:#e6db74">private</span>: %{<span style="color:#e6db74">plug_session</span>: current_user}} <span style="color:#f92672">=</span> conn, _options) do
case current_user[<span style="color:#e6db74">&#34;current_user&#34;</span>] do
nil <span style="color:#f92672">-&gt;</span>
<span style="color:#a6e22e">Logger</span><span style="color:#f92672">.</span>info <span style="color:#e6db74">&#34;:: Not Logger ::: &#34;</span>
conn
<span style="color:#f92672">|&gt;</span> put_flash(<span style="color:#e6db74">:error</span>, <span style="color:#e6db74">&#34;You need to sign in or sign up before continuing.&#34;</span>)
<span style="color:#f92672">|&gt;</span> redirect(<span style="color:#e6db74">to</span>: <span style="color:#e6db74">&#34;/auth/cas&#34;</span>)
<span style="color:#f92672">|&gt;</span> halt()
_ <span style="color:#f92672">-&gt;</span>
conn
<span style="color:#f92672">|&gt;</span> put_flash(<span style="color:#e6db74">:ok</span>, <span style="color:#e6db74">&#34;You are sign on&#34;</span>)
<span style="color:#f92672">|&gt;</span> redirect(<span style="color:#e6db74">to</span>: <span style="color:#e6db74">&#34;/auth/cas&#34;</span>)
<span style="color:#f92672">|&gt;</span> halt()
end
end

def call(conn, _params) do
<span style="color:#a6e22e">IO</span><span style="color:#f92672">.</span>inspect conn
<span style="color:#a6e22e">Logger</span><span style="color:#f92672">.</span>info <span style="color:#e6db74">&#34;:: Error ::: &#34;</span>
halt(conn)
conn
end

end
</code></pre></div><p>In your router you had to add pipeline like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">pipeline <span style="color:#e6db74">:auth</span> do
plug <span style="color:#a6e22e">ExampleUeberauthCasWeb.Plug.Auth</span>
end
</code></pre></div><p>Now in your scope is enough add the pipeline</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">scope <span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">ExampleUeberauthCasWeb</span> do
pipe_through [<span style="color:#e6db74">:browser</span>, <span style="color:#e6db74">:auth</span>] <span style="color:#75715e"># Use the default browser stack</span>

get <span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">PageController</span>, <span style="color:#e6db74">:index</span>
end
</code></pre></div><p>This way every to call some controller, will be check the session.</p>
<!-- raw HTML omitted -->
<p><strong>Conclusion</strong></p>
<p>You remember, phoenix saves the session in chache of the broswer for a limit time, if you want to make a correct logout, you should to do in both platforms (Your application and cas application ), As I said previously</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://leovergara1.github.io/tags/makingdevs/">Makingdevs</a>

  <a class="tag tag--primary tag--small" href="https://leovergara1.github.io/tags/experience/">Experience</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://leovergara1.github.io/post/api_sinatra_ruby/" data-tooltip="Api con Sinatra y ruby">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml"></span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://leovergara1.github.io/post/timer_elixir/" data-tooltip="Timer with elixir">
              
                  <span class="hide-xs hide-sm text-small icon-mr"></span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 <a href="https://github.com/Leovergara1">Brandon Vergara</a>. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://leovergara1.github.io/post/api_sinatra_ruby/" data-tooltip="Api con Sinatra y ruby">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml"></span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://leovergara1.github.io/post/timer_elixir/" data-tooltip="Timer with elixir">
              
                  <span class="hide-xs hide-sm text-small icon-mr"></span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://leovergara1.github.io/images/yo.jpg" alt="" />
    
    <h4 id="about-card-name">Brandon Vergara</h4>
    
      <div id="about-card-bio">Pasión por la programación y el análisis <strong>(<a href="mailto:leovergara.dark@gmail.com">leovergara.dark@gmail.com</a>)</strong></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Desarrollador en Makingdevs
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Mexico
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://leovergara1.github.io/cover.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://leovergara1.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/leovergara1.github.io\/post\/ueberauth_cas_with_phoenix\/';
          
            this.page.identifier = '\/post\/ueberauth_cas_with_phoenix\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'https-leovergara1-github-io';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




    
  </body>
</html>

